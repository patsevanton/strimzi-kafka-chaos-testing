# Helm values for kafbat-ui/kafka-ui chart
# helm repo add kafbat-ui https://kafbat.github.io/helm-charts
# helm install kafbat-ui kafbat-ui/kafka-ui -f kafka-ui-values.yaml

image:
  tag: v1.4.2

# Kafka clusters configuration
yamlApplicationConfig:
  kafka:
    clusters:
      - name: kafka-cluster
        bootstrapServers: kafka-cluster-kafka-bootstrap.kafka-cluster.svc.cluster.local:9092
        schemaRegistry: http://schema-registry.schema-registry.svc.cluster.local:8081
        properties:
          security.protocol: SASL_PLAINTEXT
          sasl.mechanism: SCRAM-SHA-512
          sasl.jaas.config: org.apache.kafka.common.security.scram.ScramLoginModule required username="${KAFKA_USERNAME}" password="${KAFKA_PASSWORD}";
  auth:
    type: DISABLED
  management:
    health:
      ldap:
        enabled: false

# Environment variables for credentials
env:
  - name: KAFKA_USERNAME
    valueFrom:
      secretKeyRef:
        name: kafka-ui-user
        key: username
  - name: KAFKA_PASSWORD
    valueFrom:
      secretKeyRef:
        name: kafka-ui-user
        key: password
  - name: DYNAMIC_CONFIG_ENABLED
    value: "true"

# Resource limits
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "500m"

# Probes configuration
livenessProbe:
  httpGet:
    path: /actuator/health
    port: http
  initialDelaySeconds: 60
  periodSeconds: 30

readinessProbe:
  httpGet:
    path: /actuator/health
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10

# Ingress configuration
ingress:
  enabled: true
  ingressClassName: nginx
  host: kafka-ui.apatsev.org.ru
  path: /
  pathType: Prefix
